<head>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/font/material-design-icons/Material-Design-Icons.woff" rel="stylesheet">

  <style>
    header,
main,
footer {
  padding-left: 240px;
}

body {
  backgroud: white;
}

@media only screen and (max-width: 992px) {
  header,
  main,
  footer {
    padding-left: 0;
  }
}

#credits li,
#credits li a {
  color: white;
}

#credits li a {
  font-weight: bold;
}

.footer-copyright .container,
.footer-copyright .container a {
  color: #BCC2E2;
}

.fab-tip {
  position: fixed;
  right: 85px;
  padding: 0px 0.5rem;
  text-align: right;
  background-color: #323232;
  border-radius: 2px;
  color: #FFF;
  width: auto;
}
  </style>
</head>

<body>


  <ul id="slide-out" class="side-nav fixed z-depth-2">
    <li class="center no-padding">
      <div class="  amber darken-4 darken-2 white-text" style="height: 180px;">
        <div class="row">
          <i class="large material-icons">account_circle</i>

          <p style="margin-top: 0%;" id="username">
            User
          </p>
        </div>
      </div>
    </li>

    <li id="dash_dashboard"><a class="waves-effect" href="#!"><b>Dashboard</b></a></li>

    <ul class="collapsible" data-collapsible="accordion">
      <li id="dash_users">
        <div id="dash_users_header" class="collapsible-header waves-effect"><b>Users</b></div>
        <div id="dash_users_body" class="collapsible-body">
          <ul>
            <li id="users_seller">
              <a class="waves-effect" style="text-decoration: none;" href="#!">Profile</a>
            </li>

            <li id="users_customer">
              <a class="waves-effect" style="text-decoration: none;" href="#!">Create Investment</a>
            </li>
            <li id="users_customer">
              <a class="waves-effect" style="text-decoration: none;" href="#!">Current Investment</a>
            </li>
          </ul>
        </div>
      </li>

      <li id="dash_products">
        <div id="btn_logout" class="collapsible-header waves-effect"><b>Logout</b></div>
      </li>

    </ul>
  </ul> 

  <header>
    <ul class="dropdown-content" id="user_dropdown">
      <li><a class="  amber-text text-darken-4" href="">Profile</a></li>
      <li><a class="  amber-text text-darken-4" href="" id="btn_logout">Logout</a></li>
    </ul>

    <nav class="  amber darken-4" role="navigation">
      <div class="nav-wrapper">
        <a data-activates="slide-out" class="button-collapse show-on-" href="#!"><img style="margin-top: 17px; margin-left: 5px;" src="logo.png" height="40px" /></a>

        <ul class="right hide-on-med-and-down">
          <li>
            <a class='right dropdown-button' href='' data-activates='user_dropdown'><i class='material-icons'>account_circle</i></a>
          </li>
        </ul>

        <a href="#" data-activates="slide-out" class="button-collapse"><i class="mdi-navigation-menu"></i></a>
      </div>
    </nav>

    <nav>
      <div class="nav-wrapper   amber darken-4 darken-2">
        <a style="margin-left: 20px;" class="breadcrumb" href="#!">User</a>
        <a class="breadcrumb" href="" id="username"></a>

        <div style="margin-right: 20px;" id="timestamp" class="right"></div>
      </div>
    </nav>
  </header>

  <main>
    <div class="row">
      <div class="col s12">
        <div style="padding: 10px; min-height:700px" class="card">
          <div class="row">
            <div class="left card-title">
              <h3>User Management</h3>
            </div>
          </div>

          <ul id="tabs-swipe-demo" class="tabs">
            <li class="tab col s3">
              <a href="#test-swipe-1" class="active amber-text text-darken-4">Profile</a></li>
            <li class="tab col s3"><a class="amber-text text-darken-4"" href="#test-swipe-2">Create Investment</a></li>
            <li class="tab col s3"><a href="#test-swipe-3" class="amber-text text-darken-4">Current Investment</a></li>
          </ul>

          <div id="test-swipe-1" class="col s12">
            <div class="container" id="user_pane">
              <h3>Details</h3>
              <div class="row">
                <table class="center highlight responsive-table">
                <thead><tr>
                  <td>Username</td><td>E-mail</td><td>Full Name</td><td>Phone</td>
                </tr></thead>
                <tbody><tr>
                  <td id="table_username"></td><td id="table_email"></td><td id="table_fullname"></td><td id="table_phone"></td>
                </tr><tbody>
              </table>
             </div>
          </div>
          </div>

          <div id="test-swipe-2" class="col s12">
            <div class="container" id="investment_pane">
              <h3>Create Investment</h3>
              <div class="">
                <div class="row">
                  <div class="col s5">
                    <div class="input-field inline">
                      <input id="investment_amount" type="number" class="validate">
                      <label for="investment_amount" data-error="wrong" data-success="right">Amount</label>
                      <a id="btn_create_investment" class="left-align amber darken-4 waves-effect waves-light btn">Create Investment</a></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          
          <div id="test-swipe-3" class="col s12">
            <div class="container" id="current_pane">
              <h3>Current Investments</h3>
              <div class="center">
                <table>
                  <thead><tr>
                    <td>Investment</td><td>Date</td><td>Status</td><td>Price</td>
                  </tr></thead>
                  <tbody>
                  <tr>
                    <td id="table_investment">Investment</td><td id="table_date">Date</td><td id="table_status">Status</td><td id="table_price">Price</td>
                  </tr>
                  <tbody>
                </table>
              </div>
            </div>
          </div>

          
        </div>
      </div>

      <br/><br/>
    

    

    
      

    <div class="fixed-action-btn click-to-toggle" style="bottom: 45px; right: 24px;">
      <a class="btn-floating btn-large pink waves-effect waves-light">
        <i class="large material-icons">add</i>
      </a>

      <ul>
        <li>
          <a class="btn-floating red"><i class="material-icons">note_add</i></a>
          <a href="" class="btn-floating fab-tip">Add a note</a>
        </li>

        <li>
          <a class="btn-floating yellow darken-1"><i class="material-icons">add_a_photo</i></a>
          <a href="" class="btn-floating fab-tip">Add a photo</a>
        </li>

        <li>
          <a class="btn-floating green"><i class="material-icons">alarm_add</i></a>
          <a href="" class="btn-floating fab-tip">Add an alarm</a>
        </li>

        <li>
          <a class="btn-floating blue"><i class="material-icons">vpn_key</i></a>
          <a href="" class="btn-floating fab-tip">Add a master password</a>
        </li>
      </ul>
    </div>
  </main>

  <footer class="  amber darken-4 page-footer">
    <div class="container">
      <div class="row">
        <div class="col s12">
          <h5 class="white-text">Icon Credits</h5>
          <ul id='credits'>
            <li>
              Gif Logo made using <a href="https://formtypemaker.appspot.com/" title="Form Type Maker">Form Type Maker</a> from <a href="https://github.com/romannurik/FORMTypeMaker" title="romannurik">romannurik</a>
            </li>
            <li>
              Icons made by <a href="https://material.io/icons/">Google</a>, available under <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License Version 2.0</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
         <span>Made By <a style='font-weight: bold;' href="https://github.com/piedcipher" target="_blank">User</a></span>
      </div>
    </div>
  </footer>
</body>

  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    $('.button-collapse').sideNav();

    $('.collapsible').collapsible();

    $('select').material_select();


    $('#btn_logout').click(()=>{
      sessionStorage.clear();
      console.log('logout');
      window.location = 'index.html';
    });

    $(function(){
      let socket = io();
      username = sessionStorage.getItem('username');
      console.log(username);
      if(!username) return window.location = 'login.html';

      Materialize.toast('Welcome!', 4000);

      $('#btn_create_investment').click(()=>{
        if($('#investment_amount').val() == "")
          return Materialize.toast('You need to enter an amount to create.', 4000);
        data = {
          amount:$('#investment_amount').val(),
          timestamp:Date.now(),
          username:sessionStorage.getItem('username'),
          status:'pending'
        };
        socket.emit('investment', data);
      });


      socket.emit('dashboard', username);

      socket.on('load', data=>{
        $('#username').html(username);
        $('#table_username').html(username);
        $('#table_email').html(data.email);
        $('#table_fullname').html(data.fullname);
        $('#table_phone').html(data.phone);
      });

      socket.on('update',data=>{
        $('table_investment').html(data.amount);
        $('table_date').html(data.username);
        $('table_status').html(data.status);
        $('table_price').html(data.price);
      });

      socket.on('alert',data=>Materialize.toast(data,4000));
    });
  </script>
</html>